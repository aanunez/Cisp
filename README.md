# Cisp
A Common Lisp Interpreter Built in COBOL.

# TODO
- Test, log doesn't seem to format correctly.
- Resolve:
libcob: DELETE/REWRITE not allowed (STATUS = 49) File : 'stack.dat'
WARNING - Implicit CLOSE of LOG-FILE ("..\logs\log.data")
- Creating files where called from and not where Cisp is

Questions:

- Have any of the changes broken GNU cobol 2.0

## Purpose
This is a small project built by a student at the Recurse Center to express a love for COBOL and better understand it.

Due to COBOL's lack of functions and recursion, the recursion required for Lisp is built from the ground up using file processing. Also, due to the lack of a widely supported debugger, a system logger was also implemented.

## Compatibility
Please note that Cisp is currently only actively developed for Windows. \*Nix users may experience issues. Support for GNU/Linux is currently owned by the community.

## Functionality
All features are currently in development. This is a list of what is to come.
- Representation of Symbols and Numbers ![Ongoing Development](https://img.shields.io/badge/Development-Ongoing-green.svg?style=flat-square)
- Basic Arithmetic ![Ongoing Development](https://img.shields.io/badge/Development-Ongoing-green.svg?style=flat-square)
- Flow-Control Statements  ![Not Currently in Development](https://img.shields.io/badge/Development-No-green.svg?style=flat-square)
- Lists  ![Not Currently in Development](https://img.shields.io/badge/Development-No-green.svg?style=flat-square)

## Usage
1. Make a subdirectory for your lisp file.
```cmd
mkdir test\helloworld
```
2. Create a new file `helloworld.lisp` in your subdirectory containing the following:
```lisp
(print "HelloWorld!")
```
3. To run Cisp cd into the bin (Note that you must cd in)

```cmd
cd bin
```
4. Run Cisp

```cmd
cisp.exe ..\test\helloworld\helloworld.lisp
```

## Project Structure
Currently the COBOL source files are located in the root directory.

### Directories
* bin - Contains all necessary \*.dll's (windows users) for those who want to play with CISP without changing the code. This is due to the fact that so few people have COBOL compilers.
* logs - Contains the log file generated by the system.
* test - Contains all test files organized by subject.

### COBOL Files
* cisp.cbl - The main COBOL program.
* cisp-error.cbl - The Error System in the program. It will "throw" errors when called.
* lisp.cbl - Responsible for executing the lisp program.
* logger.cbl - The Logging System in the program. It will log events in the system when called.
* recursion.cbl - Handles recursion as requested from lisp.cbl.
* tokenizer.cbl - Responsible for tokenizing the lisp file given to execute.

## Compiling
### Windows
The easiest way I have found to compile COBOL is [GNU's COBOL compilier](https://sourceforge.net/projects/open-cobol/). For those who prefer IDE's I have found [Open COBOL IDE](http://opencobolide.readthedocs.io/en/latest/download.html) to be very helpful.

### GNU/Linux
Compiling to a single executable is simple on most distros...

'''
git clone https://github.com/lauryndbrown/Cisp.git
sudo apt install open-cobol
cd Cisp
mkdir dist
cobc -x *.cbl -o dist/cisp
chmod +x dist/cisp
'''

## Tests
### Windows
To run all tests in the project, double click `bin\cisp.bat`

To run a single test:
`cd bin`

`cisp.exe ..\test\test_subdirectory\test_name.lisp`

#### Create your own Lisp Files for Testing
1. Create a directory in `test\` to create another test category.
2. In your subdirectory create a lisp file.
3.  `cd bin`
4. `cisp.exe ..\test\test_subdirectory\test_name.lisp`

### GNU/Linux

No script exists to argegate tests currently. They can be run individually from the 'test' directory.

## Developing Cisp
Coming soon.

### How Cisp Works
Coming soon.

### Log to Log File
Coming soon.

### Throw an Error
Coming soon.
